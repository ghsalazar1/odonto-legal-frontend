<nb-layout style="padding:0px;">
  <nb-layout-column>
    <div class="login-wrapper" style="padding-left: 2rem;padding-top: 2rem;">
      <nb-card class="login-card">
        <nb-card-header>
          <div class="logo-container">
            <img src="../../../assets/logo-odonto-legal.png" alt="Logo Odonto-Legal" class="logo-img" />
          </div>
          <h3 class="login-title" style="text-align: center;">Novo Usuário</h3>
        </nb-card-header>

        <nb-card-body>
          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="login-form">
            <!-- Nome -->
            <div class="form-group">
              <nb-icon icon="person-outline"></nb-icon>
              <input nbInput fullWidth formControlName="name" placeholder="Nome completo" [status]="registerForm.get('name')?.invalid && registerForm.get('name')?.touched ? 'danger' : 'basic'" />
              <div *ngIf="registerForm.get('name')?.invalid && registerForm.get('name')?.touched" class="text-danger is-size-7 mt-1">
                O nome é obrigatório.
              </div>
            </div>

            <!-- E-mail -->
            <div class="form-group">
              <nb-icon icon="email-outline"></nb-icon>
              <input nbInput fullWidth formControlName="email" placeholder="E-mail" type="email" [status]="registerForm.get('email')?.invalid && registerForm.get('email')?.touched ? 'danger' : 'basic'" />
              <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched" class="text-danger is-size-7 mt-1">
                Forneça um e-mail válido.
              </div>
            </div>

            <!-- Senha -->
            <div class="form-group">
              <nb-icon icon="lock-outline"></nb-icon>
              <input nbInput fullWidth formControlName="password" placeholder="Senha" type="password" [status]="registerForm.get('password')?.invalid && registerForm.get('password')?.touched ? 'danger' : 'basic'" />
              <div *ngIf="registerForm.get('password')?.invalid && registerForm.get('password')?.touched" class="text-danger is-size-7 mt-1">
                A senha deve ter no mínimo 6 caracteres.
              </div>
            </div>

            <!-- Confirmar Senha -->
            <div class="form-group">
              <nb-icon icon="lock-outline"></nb-icon>
              <input nbInput fullWidth formControlName="confirmPassword" placeholder="Confirmar senha" type="password" [status]="registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched ? 'danger' : 'basic'" />
              <div *ngIf="registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched" class="text-danger is-size-7 mt-1">
                As senhas não coincidem.
              </div>
            </div>

            <!-- Função -->
            <div class="form-group">
              <nb-icon icon="people-outline"></nb-icon>
              <nb-select fullWidth placeholder="Selecione a função" formControlName="roleId" [status]="registerForm.get('roleId')?.invalid && registerForm.get('roleId')?.touched ? 'danger' : 'basic'">
                <nb-option *ngFor="let role of roles" [value]="role.id">{{ role.description }}</nb-option>
              </nb-select>
              <div *ngIf="registerForm.get('roleId')?.invalid && registerForm.get('roleId')?.touched" class="text-danger is-size-7 mt-1">
                Selecione uma função.
              </div>
            </div>

            <button type="submit" nbButton fullWidth [disabled]="loading || registerForm.invalid" class="login-button" style="background-color: #4BCCA6; color: white;">
              Criar Usuário
            </button>
          </form>
        </nb-card-body>

        <nb-card-footer class="has-text-centered">
          <a [routerLink]="['/login']" class="forgot">Já tem conta? Faça login</a>
        </nb-card-footer>
      </nb-card>
    </div>
  </nb-layout-column>
</nb-layout>
